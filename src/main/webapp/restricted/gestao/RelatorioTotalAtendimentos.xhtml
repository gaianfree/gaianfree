<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:p="http://primefaces.org/ui"
>
  <h:body>
    <p:toolbar id="toolbar1">
      <f:facet name="left">
        <p:spacer width="5px" />

        <h:outputText value="Total de Atendimentos:  " />
        <h:outputText
          value="#{relatorioTotalAtendimentosBean.qdeAtendimentos}"
        />

        <p:spacer width="5px" />

        <span class="ui-separator">
          <span class="ui-icon ui-icon-grip-dotted-vertical" />
        </span>

        <p:spacer width="5px" />

        <p:commandButton
          title="Obter planilha do Excel"
          value="Exportar para Excel"
          icon="pi pi-file-excel"
          ajax="false"
        >
          <p:dataExporter
            type="xls"
            target="listaDataTable1"
            fileName="Relatorio_total_grafico"
          />
        </p:commandButton>
      </f:facet>
    </p:toolbar>

    <div class="card">
      <p:barChart
        model="#{relatorioTotalAtendimentosBean.barModel}"
        style="width: 100%; height: 500px"
      />
    </div>

    <p:spacer height="5px" />
    <!--  Lista de itens de atendimento -->
    <p:dataTable
      id="listaDataTable1"
      value="#{relatorioTotalAtendimentosBean.listaAtendimentos}"
      var="to"
      style="margin-top: 20px"
      emptyMessage="Nenhum atendimento encontrado."
      rowsPerPageTemplate="10,15,20"
      rows="10"
      paginator="true"
      paginatorAlwaysVisible="true"
      paginatorPosition="bottom"
    >
      <p:column
        headerText="Nome da Unidade"
        style="width: 100px; text-align: center"
      >
        <h:outputText value="#{to.nome}" />
      </p:column>
      <p:column
        headerText="Qde de Atendimentos"
        style="width: 60px; text-align: center"
      >
        <h:outputText value="#{to.qdeAtendimentos}" />
      </p:column>
    </p:dataTable>
  </h:body>
</html>
